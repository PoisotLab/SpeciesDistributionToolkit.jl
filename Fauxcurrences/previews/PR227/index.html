<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Fauxcurrences.jl · Fauxcurrences</title><meta name="title" content="Fauxcurrences.jl · Fauxcurrences"/><meta property="og:title" content="Fauxcurrences.jl · Fauxcurrences"/><meta property="twitter:title" content="Fauxcurrences.jl · Fauxcurrences"/><meta name="description" content="Documentation for Fauxcurrences."/><meta property="og:description" content="Documentation for Fauxcurrences."/><meta property="twitter:description" content="Documentation for Fauxcurrences."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.svg" alt="Fauxcurrences logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>Fauxcurrences</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Fauxcurrences.jl</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Fauxcurrences.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Fauxcurrences.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/main/Fauxcurrences/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Generation-of-fauxcurrences"><a class="docs-heading-anchor" href="#Generation-of-fauxcurrences">Generation of fauxcurrences</a><a id="Generation-of-fauxcurrences-1"></a><a class="docs-heading-anchor-permalink" href="#Generation-of-fauxcurrences" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.bootstrap!" href="#Fauxcurrences.bootstrap!"><code>Fauxcurrences.bootstrap!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bootstrap!(sim, layer, obs, obs_intra, obs_inter, sim_intra, sim_inter)</code></pre><p>Generates the initial proposition for points - this function generates the points for all taxa at once, so some knowledge of the distance matrices is required. Note that this function is modifying the <em>bootstrapped</em> object, in order to make be as efficient as possible.</p><p>Specifically, the first point for each taxa is picked to respect the maximal inter-specific distances, and then the following points are picked to respect the intra and inter-specific distances. Points after the first one are added <em>at random</em>, so there can be an accumulation of points in some species early on.</p><p>Note that this function is not particularly efficient, but this is a little bit of over-head for every simulation. The only guarantee offered is that the distances are not above the maximal distances in the dataset, there is no reason to expect that the distribution of distances within or across taxa will be respected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/bootstrap.jl#L1-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.preallocate_simulated_points" href="#Fauxcurrences.preallocate_simulated_points"><code>Fauxcurrences.preallocate_simulated_points</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">preallocate_simulated_points(obs; samples=size.(obs, 2))</code></pre><p>Create an empty matrix given a series of observations, and a number of samples to keep in the simulated dataset for each series of observations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/bootstrap.jl#L58-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.get_valid_coordinates" href="#Fauxcurrences.get_valid_coordinates"><code>Fauxcurrences.get_valid_coordinates</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_valid_coordinates(observations::GBIFRecords, layer::T) where {T &lt;: SDMLayer}</code></pre><p>Get the coordinates for a list of observations, filtering the ones that do not correspond to valid layer positions. Valid layer positions are defined as falling within a valued pixel from the layer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/coordinates.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.step!" href="#Fauxcurrences.step!"><code>Fauxcurrences.step!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Fauxcurrences.step!(sim, layer, W, obs_intra, obs_inter, sim_intra, sim_inter, bin_intra, bin_inter, bin_s_intra, bin_s_inter, distance)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/step.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences._random_point" href="#Fauxcurrences._random_point"><code>Fauxcurrences._random_point</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_random_point(ref, d; R=Fauxcurrences._earth_radius)</code></pre><p>This solves the direct (first) geodetic problem assuming Haversine distances are a correct approximation of the distance between points.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences._generate_new_random_point" href="#Fauxcurrences._generate_new_random_point"><code>Fauxcurrences._generate_new_random_point</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_generate_new_random_point(layer, points, distances)</code></pre><p>Generates a new random point (that must fall within a valued cell of <code>layer</code>) based on a collection of <code>points</code> and a <code>Dxy</code> distance matrix. The algorithm works by sampling a point, a distance in the matrix, and then generates a new point through a call to <code>_random_point</code>. Note that the distance is multiplied by the square root of a random deviate within the unit interval, in order to have points that fall uniformly within the circle defined by the sampled distance. In the absence of this correction, the distribution of points is biased towards the center.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L22-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences._bin_distribution" href="#Fauxcurrences._bin_distribution"><code>Fauxcurrences._bin_distribution</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_bin_distribution(D::Matrix{Float64}, m::Float64)::Vector{Float64}</code></pre><p>Bin a distance matrix, using a default count of 20 bins. This function is instrumental in the package, as it is used internally to calculate the divergence between the observed and simulated distances distributions. This specific implementation had the least-worst performance during a series of benchmarks, but in practice the package is going to spend a lot of time running it. It is a prime candidate for optimisation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L42-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences._bin_distribution!" href="#Fauxcurrences._bin_distribution!"><code>Fauxcurrences._bin_distribution!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_bin_distribution!(c::Vector{Float64}, D::Matrix{Float64}, m::Float64)::Vector{Float64}</code></pre><p>In-place allocation of the distribution binning. This function is the one that is used internally to over-write the scores.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L57-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences._distance_between_binned_distributions" href="#Fauxcurrences._distance_between_binned_distributions"><code>Fauxcurrences._distance_between_binned_distributions</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_distance_between_binned_distributions(p, q)</code></pre><p>Returns the Jensen-Shannon distance (i.e. the square root of the JS divergence) for the two distance matrices. This version is preferred to the KL divergence in the original implementation as it prevents the <code>Inf</code> values when p(x)=0 and q(x)&gt;0. The JS divergences is bounded between 0 and the natural log of 2, which gives an absolute measure of fit allowing to compare the solutions. Note that the value returned is <em>already</em> corrected, so it can be at most 1.0, and at best (identical matrices) 0.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L72-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.preallocate_distance_matrices" href="#Fauxcurrences.preallocate_distance_matrices"><code>Fauxcurrences.preallocate_distance_matrices</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">preallocate_distance_matrices(obs; samples=size.(obs, 2))</code></pre><p>Generates the internal distance matrices.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L87-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.measure_intraspecific_distances!" href="#Fauxcurrences.measure_intraspecific_distances!"><code>Fauxcurrences.measure_intraspecific_distances!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">measure_intraspecific_distances!(intra, obs; updated=1:length(obs))</code></pre><p>Updates the matrices for intraspecific distances; note that internally, the <code>updated</code> keyword argument is going to change, to only replace what needs to be replaced.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L100-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.measure_interspecific_distances!" href="#Fauxcurrences.measure_interspecific_distances!"><code>Fauxcurrences.measure_interspecific_distances!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">measure_interspecific_distances!(inter, obs; updated=1:length(obs))</code></pre><p>Updates the matrices for interspecific distances; note that internally, the <code>updated</code> keyword argument is going to change, to only replace what needs to be replaced.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L115-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.score_distributions" href="#Fauxcurrences.score_distributions"><code>Fauxcurrences.score_distributions</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">score_distributions(W, bin_intra, bin_s_intra, bin_inter, bin_s_inter)</code></pre><p>Performs the actual score of the distributions, based on the weight matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/utilities.jl#L134-L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.equal_weights" href="#Fauxcurrences.equal_weights"><code>Fauxcurrences.equal_weights</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">equal_weights(n)</code></pre><p>All matrices have the same weight</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/weightmatrices.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.weighted_components" href="#Fauxcurrences.weighted_components"><code>Fauxcurrences.weighted_components</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">weighted_components(n, intra)</code></pre><p>The intra-specific component has relative weight <code>intra</code> – for a value of 1.0, the model is a purely intra-specific one</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/weightmatrices.jl#L16-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Fauxcurrences.equally_weighted_components" href="#Fauxcurrences.equally_weighted_components"><code>Fauxcurrences.equally_weighted_components</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">equally_weighted_components(n)</code></pre><p>The intra and inter components have the same weight, which means the inter-specific matrices can have less cumulative weight</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/10d803572711b1c4ca94f9a15ebb6be8f34cbf38/Fauxcurrences/src/weightmatrices.jl#L36-L41">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Thursday 12 September 2024 20:45">Thursday 12 September 2024</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
