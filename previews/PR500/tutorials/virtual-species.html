<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Generating virtual species | Species Distribution Toolkit</title>
    <meta name="description" content="Documentation for SpeciesDistributionToolkit.jl">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/SpeciesDistributionToolkit.jl/previews/PR500/assets/style.CGHQLR1I.css" as="style">
    <link rel="preload stylesheet" href="/SpeciesDistributionToolkit.jl/previews/PR500/vp-icons.css" as="style">
    
    <script type="module" src="/SpeciesDistributionToolkit.jl/previews/PR500/assets/app.B9ktDB6P.js"></script>
    <link rel="preload" href="/SpeciesDistributionToolkit.jl/previews/PR500/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/SpeciesDistributionToolkit.jl/previews/PR500/assets/chunks/theme.DJnp4UKE.js">
    <link rel="modulepreload" href="/SpeciesDistributionToolkit.jl/previews/PR500/assets/chunks/framework.Dx8SKIRi.js">
    <link rel="modulepreload" href="/SpeciesDistributionToolkit.jl/previews/PR500/assets/tutorials_virtual-species.md.sY-PvlA8.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-492508fc></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-492508fc>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle has-sidebar" data-v-822684d1 data-v-0f4f798b><a class="title" href="/SpeciesDistributionToolkit.jl/previews/PR500/" data-v-0f4f798b><!--[--><!--]--><!--[--><img class="VPImage logo" src="/SpeciesDistributionToolkit.jl/previews/PR500/logo.svg" width="24" height="24" alt data-v-35a7d0b8><!--]--><span data-v-0f4f798b>SDT.jl</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/SpeciesDistributionToolkit.jl/previews/PR500/index" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Index</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Manual</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials" data-v-acbfed09><!--[--><span data-v-acbfed09>Tutorials</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/howto" data-v-acbfed09><!--[--><span data-v-acbfed09>How-to</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/reference" data-v-acbfed09><!--[--><span data-v-acbfed09>Reference</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Datasets</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuGroup" data-v-7dd3104a data-v-48c802d0><p class="title" data-v-48c802d0>Raster data</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/datasets/BiodiversityMapping" data-v-acbfed09><!--[--><span data-v-acbfed09>BiodiversityMapping</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/datasets/CHELSA1" data-v-acbfed09><!--[--><span data-v-acbfed09>CHELSA 1</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/datasets/CHELSA2" data-v-acbfed09><!--[--><span data-v-acbfed09>CHELSA 2</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/datasets/Copernicus" data-v-acbfed09><!--[--><span data-v-acbfed09>Copernicus</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/datasets/EarthEnv" data-v-acbfed09><!--[--><span data-v-acbfed09>EarthEnv</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/datasets/PaleoClim" data-v-acbfed09><!--[--><span data-v-acbfed09>PaleoClim</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/datasets/WorldClim2" data-v-acbfed09><!--[--><span data-v-acbfed09>WorldClim 2</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-7dd3104a data-v-48c802d0><p class="title" data-v-48c802d0>Polygon data</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/polygons/EPA" data-v-acbfed09><!--[--><span data-v-acbfed09>EPA</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/polygons/GADM" data-v-acbfed09><!--[--><span data-v-acbfed09>GADM</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/polygons/NaturalEarth" data-v-acbfed09><!--[--><span data-v-acbfed09>Natural Earth</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/polygons/OneEarth" data-v-acbfed09><!--[--><span data-v-acbfed09>One Earth</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/polygons/OpenStreetMap" data-v-acbfed09><!--[--><span data-v-acbfed09>OpenStreetMap</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link" href="/SpeciesDistributionToolkit.jl/previews/PR500/polygons/Resolv" data-v-acbfed09><!--[--><span data-v-acbfed09>Resolv</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Ecosystem</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuGroup" data-v-7dd3104a data-v-48c802d0><p class="title" data-v-48c802d0>Core packages</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/Fauxcurrences/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>Fauxcurrences.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/GBIF/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>GBIF.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/OccurrencesInterface/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>OccurrencesInterface.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/Phylopic/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>Phylopic.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/PseudoAbsences/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>PseudoAbsences.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SDeMo/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>SDeMo.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SimpleSDMDatasets/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>SimpleSDMDatasets.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SimpleSDMPolygons/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>SimpleSDMPolygons.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SimpleSDMLayers/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>SimpleSDMLayers.jl</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-7dd3104a data-v-48c802d0><p class="title" data-v-48c802d0>Packages we support</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/BiodiversityObservationNetworks.jl/dev/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>BON.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://juliastats.org/Clustering.jl/stable/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>Clustering.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://juliastats.org/MultivariateStats.jl/stable/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>MultivariateStats.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://docs.ecojulia.org/NeutralLandscapes.jl/dev/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>NeutralLandscapes.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://poisotlab.github.io/SpatialBoundaries.jl/dev/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>SpatialBoundaries.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-acbfed09><a class="VPLink link vp-external-link-icon" href="https://juliaclimate.github.io/STAC.jl/dev/" target="_blank" rel="noreferrer" data-v-acbfed09><!--[--><span data-v-acbfed09>STAC.jl</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-04f5c5e9><span class="vpi-more-horizontal icon" data-v-04f5c5e9></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-168ddf5d><button data-v-168ddf5d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-18756405><div class="curtain" data-v-18756405></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18756405><span class="visually-hidden" id="sidebar-aria-label" data-v-18756405> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Tutorials</h2><!----></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/climatenovelty/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Calculating climate novelty</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/consensus/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Generating a landcover consensus</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/fauxcurrences/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Generating fauxcurrences</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/virtual-species/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Generating virtual species</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/spatial-boundaries/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Identifying spatial boundaries</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/sdm-training/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Building a species distribution model</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/sdm-ensembles/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Ensemble models</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/sdm-boosting/" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>SDM with AdaBoost</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _SpeciesDistributionToolkit_jl_previews_PR500_tutorials_virtual-species" data-v-83890dd9><div><h1 id="Generating-virtual-species" tabindex="-1">Generating virtual species <a class="header-anchor" href="#Generating-virtual-species" aria-label="Permalink to &quot;Generating virtual species {#Generating-virtual-species}&quot;">​</a></h1><p>In this vignette, we provide a demonstration of how the different SpeciesDistributionToolkit functions can be chained together to rapidly create a virtual species, generate its range map, and sample points from it according to the predicted suitability.</p><p>Note that the generation of virtual species is its own domain of research (<a href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/virtual-species#Meynard2013">Meynard and Kaplan, 2013</a>), and this tutorial is only meant to show how the functions in the package can be made to work together.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SpeciesDistributionToolkit</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> CairoMakie</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> Statistics</span></span></code></pre></div><p>We start by defining the extent in which we want to create the virtual species. For the purpose of this example, we will use the country of Paraguay. Note that the boundingbox function returns the coordinates in WGS84.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">place </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getpolygon</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PolygonData</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(OpenStreetMap</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> Places)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> place </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;Paraguay&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">extent </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SpeciesDistributionToolkit</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">boundingbox</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(place)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>(left = -62.64066696166992, right = -54.257999420166016, bottom = -27.606393814086914, top = -19.287647247314453)</span></span></code></pre></div><p>We then download some environmental data. In this example, we use the BioClim variables as distributed by CHELSA. In order to simplify the code, we will only use BIO1 (mean annual temperature) and BIO12 (total annual precipitation). Note that we collect these layers in a vector typed as SDMLayer{Float32}, in order to ensure that future operations already receive floating point values.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">provider </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RasterData</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(CHELSA2</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> BioClim)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">L </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SDMLayer{Float32}[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SDMLayer</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(provider</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> layer </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> l</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> extent</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> l </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">&quot;BIO1&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;BIO12&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]]</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>2-element Vector{SDMLayer{Float32}}:</span></span>
<span class="line"><span> 🗺️  A 999 × 1007 layer (1005993 Float32 cells)</span></span>
<span class="line"><span> 🗺️  A 999 × 1007 layer (1005993 Float32 cells)</span></span></code></pre></div><p>We now mask the layers using the polygons we downloaded initially. At the same time, we will transform their values so that they are all in the unit range.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rescale!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mask!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> place))</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>2-element Vector{SDMLayer{Float32}}:</span></span>
<span class="line"><span> 🗺️  A 999 × 1007 layer (508483 Float32 cells)</span></span>
<span class="line"><span> 🗺️  A 999 × 1007 layer (508483 Float32 cells)</span></span></code></pre></div><p>In the next steps, we will generate some virtual species. These are defined by an environmental response to each layer, linking the value of the layer at a point to the suitability score. For the sake of expediency, we only use logistic responses, and generate one function for each layer (drawing α from a normal distribution, and β uniformly).</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logistic</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(x</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> α</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> β) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> exp</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">((x </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> β) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> α))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logistic</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(α</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> β) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (x) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> logistic</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(x</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> α</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> β)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>logistic (generic function with 2 methods)</span></span></code></pre></div><p>We will next write a function that will sample a value in each layer to serve as the center of the logistic response, draw a shape parameter at random, and then return the suitability of the environment for a virtual species under the assumption of a set prevalence:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> virtualspecies</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Vector{&lt;:SDMLayer}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prevalence</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Float64</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 0.25</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    prevalence </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clamp</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(prevalence</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eps</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1.0</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    invalid </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> invalid</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        centers </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rand</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(l)) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> l </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> L]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        shapes </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> randn</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        predictors </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logistic</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(centers[i]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> shapes[i]) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> i </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eachindex</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L)]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        predictions </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [predictors[i]</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L[i]) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> i </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eachindex</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L)]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rescale!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.(predictions)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">        global</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prediction </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> prod</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(predictions)</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">        #rescale!(prediction)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        invalid </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> any</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(isnan</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prediction)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    cutoff </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> quantile</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(prediction</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prevalence)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prediction</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> cutoff</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prediction </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.&gt;=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> cutoff</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">end</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>virtualspecies (generic function with 1 method)</span></span></code></pre></div><p>We can now apply this new function to create a simulated species distribution:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">vsp</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> τ</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> vrng </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> virtualspecies</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prevalence </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 0.33</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>(🗺️  A 999 × 1007 layer (508483 Float64 cells), 0.04390402857425347, 🗺️  A 999 × 1007 layer (508483 Bool cells))</span></span></code></pre></div><p>We can plot the output of this function to inspect what the generated range looks like:</p><p><img src="/SpeciesDistributionToolkit.jl/previews/PR500/assets/10553135393345575834-virtualspeciescomparison.Dvi0J05c.png" alt=""></p><details class="details custom-block"><summary>Code for the figure</summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">f </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Figure</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> size </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">700</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 300</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ax1 </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Axis</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> aspect </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataAspect</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> title </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;Score&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ax2 </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Axis</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 2</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> aspect </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataAspect</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> title </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;Range&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">heatmap!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> vsp</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> colormap </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :navia)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">heatmap!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax2</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> vrng</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> colormap </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :Greens)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ax </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [ax1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ax2]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    tightlimits!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    hidedecorations!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    hidespines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    lines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> place</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> color </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :black)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">end</span></span></code></pre></div></details><p>Random observations for the virtual species are generated by setting the probability of inclusion to 0 for all values above the cutoff, and then sampling proportionally to the suitability for all remaining points. Note that the method is called backgroundpoints, as it is normally used for pseudo-absences. The second argument of this method is the number of points to generate.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">presencelayer </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backgroundpoints</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mask</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(vsp</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> nodata</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(vrng</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">))</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 100</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>🗺️  A 999 × 1007 layer with 167804 Bool cells</span></span>
<span class="line"><span>   Projection: +proj=longlat +datum=WGS84 +no_defs</span></span></code></pre></div><p>We can finally plot the result:</p><p><img src="/SpeciesDistributionToolkit.jl/previews/PR500/assets/10553135393345575834-virtualspeciessample.pIVtcFb5.png" alt=""></p><details class="details custom-block"><summary>Code for the figure</summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">f </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Figure</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> size </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">700</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 700</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ax </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Axis</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> aspect </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataAspect</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">())</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">heatmap!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> vrng</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> colormap </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :Greens)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> place</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> color </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :black)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scatter!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    presencelayer</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    color </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :white</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    strokecolor </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :black</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    strokewidth </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 2</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    markersize </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 10</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    label </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;Virtual presences&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tightlimits!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidespines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidedecorations!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">axislegend</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> position </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :lb</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> framevisible </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div></details><p>These data could, for example, be used to benchmark species distribution models. Here, in order to say something about potential patterns of biodiversity, we will simulate 100 species, with prevalences drawn uniformly in the unit interval.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ranges </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">virtualspecies</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(L</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prevalence </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rand</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">())[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">3</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">] </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> _ </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">100</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">first</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ranges)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>🗺️  A 999 × 1007 layer with 508483 Bool cells</span></span>
<span class="line"><span>   Projection: +proj=longlat +datum=WGS84 +no_defs</span></span></code></pre></div><p>We can sum these layers to obtain a measurement of the simulated species richness:</p><p><img src="/SpeciesDistributionToolkit.jl/previews/PR500/assets/10553135393345575834-virtualspeciesrichness.Cds5xfjj.png" alt=""></p><details class="details custom-block"><summary>Code for the figure</summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">f </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Figure</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> size </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">700</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 700</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">richness </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mosaic</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sum</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ranges)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ax </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Axis</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> aspect </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataAspect</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">())</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">hm </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> heatmap!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> richness</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> colorrange </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">0</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> length</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ranges))</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> colormap </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :navia)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Colorbar</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    hm</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    label </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;Species richness&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    alignmode </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Inside</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    width </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Relative</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">0.4</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    valign </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :bottom</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    halign </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :left</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    tellheight </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    tellwidth </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    vertical </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidedecorations!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> place</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> color </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :black)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidespines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span></code></pre></div></details><p>We can now transform these data into a partition of the contribution of each species and location to the total beta-diversity (<a href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/virtual-species#Legendre2013">Legendre and De Cáceres, 2013</a>):</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LCBD</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ranges</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Vector{SDMLayer{Bool}}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> transformation</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Function</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> identity)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    Y </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> transformation</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hcat</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.(ranges)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    S </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (Y </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mean</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(Y</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> dims </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.^</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 2.0</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    SStotal </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sum</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(S)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    BDtotal </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SStotal </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(Y</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    SSj </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sum</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(S</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> dims </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    SCBDj </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SSj </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">./</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SStotal</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    SSi </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sum</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(S</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> dims </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 2</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    LCBDi </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SSi </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">./</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> SStotal</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    betadiv </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> similar</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">first</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ranges)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> Float32)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    betadiv</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">grid[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findall</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(betadiv</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">indices)] .</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vec</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(LCBDi)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> betadiv</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vec</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(SCBDj)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> BDtotal</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">end</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>LCBD (generic function with 1 method)</span></span></code></pre></div><p>For good measure, we will also add a function to perform the Hellinger transformation:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> hellinger</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(Y</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">AbstractMatrix{T}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {T </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> Number</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    yi </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sum</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(Y</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> dims </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 2</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">.+</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sqrt</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.(Y </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">./</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> yi)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">end</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>hellinger (generic function with 1 method)</span></span></code></pre></div><p>We can now apply this function to our simulated ranges. The first output is a layer with the local contributions to beta diversity (LCBD), the second is a vector with the contribution of species, and the last element is the total beta diversity.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">βl</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> βs</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> βt </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LCBD</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ranges</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> transformation </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> hellinger)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span>(🗺️  A 999 × 1007 layer (508483 Float32 cells), [0.011766099466377139, 0.026833725404222027, 0.01221964833851869, 0.0022979489254993392, 0.0011022689934384684, 0.010689156496224041, 0.010321811020545857, 0.0032315522101780255, 0.01149825529745756, 0.008331440939927371, 0.020900179239567104, 0.014557644053674837, 0.009554710866521973, 0.008225177445221507, 0.011437795253987276, 0.008919366186821778, 0.00438306218810875, 0.0006914329386110686, 0.014720525068822559, 0.008760572943514662, 0.010452287843643852, 0.0032333180220630612, 0.012854769386707272, 0.0040768040051539205, 0.024960772474752407, 0.007249627546847172, 0.011486360806409615, 0.0036698168275655922, 0.004800896081937175, 0.009493100681517645, 0.013074475500096933, 0.01026685385534938, 0.008145294617576081, 0.005913580737821368, 0.011139683197935879, 0.011560527345328902, 0.006574256542005129, 0.026715835547600274, 0.003903749148067644, 0.011039049504320447, 0.01553974374934536, 0.008460582687403812, 0.015940940178969618, 0.009423792403675085, 0.0012098688283262184, 0.011346086915326046, 0.013599303228117896, 0.008409699962000345, 0.010853706239654525, 0.0010270306620563843, 0.010722813936812048, 0.011123240127209359, 0.002233703717361818, 0.009614806331769787, 0.011920732405112437, 0.007304547034062758, 0.010318013264599817, 0.011313044360602832, 0.009506703081154031, 0.0120306085050048, 0.007565896045754605, 0.005971798484729995, 0.0023507762044072613, 0.014260374277851104, 0.01385334565720932, 0.02052092334863084, 0.010644600253779455, 0.01096624282769139, 0.0016011182567332218, 0.007914986164467109, 0.009438767485869883, 0.010237095505957333, 0.014982757176696976, 0.013300968204585048, 0.011599224104669367, 0.0092987613955531, 0.025761887248397022, 0.01075655974784307, 0.01000207906975833, 0.02166990633592752, 0.002661716238504451, 0.010868862389530502, 0.004976881239352148, 0.012186497946033934, 0.0111088867896717, 0.007800872053483844, 0.016027076882405653, 0.009047529562829457, 0.010343798238007029, 0.0055000337796443964, 0.013266908578450299, 0.01085535126821047, 0.004573345326503229, 0.01133922932269436, 0.0009916989612237018, 0.011480167929302471, 0.010353002518160922, 0.010578903196738995, 0.0005090237370313078, 0.009879745677204368], 0.367960058577845)</span></span></code></pre></div><p>We can now plot the various elements (most of the code below is actually laying out the sub-panels for the plot), to identify areas in space that contribute most to ecological uniqueness (<a href="/SpeciesDistributionToolkit.jl/previews/PR500/tutorials/virtual-species#Dansereau2022">Dansereau <em>et al.</em>, 2022</a>):</p><p><img src="/SpeciesDistributionToolkit.jl/previews/PR500/assets/10553135393345575834-betadivmap.Ia5WVldG.png" alt=""></p><details class="details custom-block"><summary>Code for the figure</summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">f </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Figure</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> size </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">700</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 700</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ax </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Axis</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> aspect </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataAspect</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">())</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">hm </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> heatmap!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    (βl </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mean</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(βl)) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> std</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(βl)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    colormap </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Reverse</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(:RdYlBu)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    colorrange </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">2</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 2</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> place</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> color </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :black)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Colorbar</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    hm</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    label </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;Normalized LCBD&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    alignmode </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Inside</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    width </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Relative</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">0.4</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    valign </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :bottom</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    halign </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :left</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    tellheight </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    tellwidth </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    vertical </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tightlimits!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidespines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidedecorations!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ax_inset </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Axis</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(f[</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    width </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Relative</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">0.36</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    height </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Relative</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">0.1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    halign </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1.0</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    valign </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 0.9</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    xlabel </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;Rel. SCBD&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hist!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax_inset</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> βs </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">./</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> maximum</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(βs)</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> color </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :lightgrey</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bins </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 40</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xlims!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax_inset</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 0</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidespines!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax_inset</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :t</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :r</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> :l)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hideydecorations!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax_inset)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidexdecorations!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax_inset</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ticks </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ticklabels </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> label </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tightlimits!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ax_inset)</span></span></code></pre></div></details><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><ul><li><p><a id="Dansereau2022"></a> Dansereau, G.; Legendre, P. and Poisot, T. (2022). <a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/oik.09063" target="_blank" rel="noreferrer"><em>Evaluating ecological uniqueness over broad spatial extents using species distribution modelling</em></a>. <a href="https://doi.org/10.1111/oik.09063" target="_blank" rel="noreferrer">Oikos (Copenhagen, Denmark) <strong>2022</strong>, e09063</a>.</p></li><li><p><a id="Legendre2013"></a> Legendre, P. and De Cáceres, M. (2013). <a href="https://pubmed.ncbi.nlm.nih.gov/23809147/" target="_blank" rel="noreferrer"><em>Beta diversity as the variance of community data: dissimilarity coefficients and partitioning</em></a>. <a href="https://doi.org/10.1111/ele.12141" target="_blank" rel="noreferrer">Ecology letters <strong>16</strong>, 951–963</a>.</p></li><li><p><a id="Meynard2013"></a> Meynard, C. N. and Kaplan, D. M. (2013). <a href="http://dx.doi.org/10.1111/jbi.12006" target="_blank" rel="noreferrer"><em>Using virtual species to study species distributions and model performance</em></a>. <a href="https://doi.org/10.1111/jbi.12006" target="_blank" rel="noreferrer">Journal of biogeography <strong>40</strong>, 1–8</a>.</p></li></ul></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><div class="edit-info" data-v-4f9813fa><div class="edit-link" data-v-4f9813fa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/edit/main/docs/src/tutorials/virtual-species.md" target="_blank" rel="noreferrer" data-v-4f9813fa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-4f9813fa></span> Edit this page<!--]--></a></div><!----></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a> by the <a href="https://poisotlab.io/" target="_blank">Computational Ecology Research Group</a><br></p><p class="copyright" data-v-c970a860>This documentation is released under the <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC-BY 4.0 licence</a> - 2025</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"datasets_biodiversitymapping.md\":\"DA6p4WzU\",\"datasets_chelsa1.md\":\"CDgAiDYg\",\"datasets_chelsa2.md\":\"Dm1J6Coq\",\"datasets_copernicus.md\":\"Kq9MjEOv\",\"datasets_earthenv.md\":\"iTX2B5D7\",\"datasets_paleoclim.md\":\"CvvbxhE5\",\"datasets_worldclim2.md\":\"DhGl-plQ\",\"howto_cluster-layers.md\":\"Cy43BRE1\",\"howto_download-gbif-data.md\":\"Bx2veuCP\",\"howto_get-boundingbox.md\":\"BsgUz7TQ\",\"howto_get-gbif-data.md\":\"CSheiEts\",\"howto_index.md\":\"DZZeZ1Qj\",\"howto_interpolate.md\":\"gBTNPfaQ\",\"howto_layer-arithmetic.md\":\"DTFDqno0\",\"howto_layer-occurrences.md\":\"B7tyebu2\",\"howto_layer-statistics.md\":\"DWuAE3xI\",\"howto_list-provided-layers.md\":\"CZ4IMmy3\",\"howto_makie.md\":\"vn7GBdVe\",\"howto_mask-layer.md\":\"mW03ibod\",\"howto_mask-polygons.md\":\"C5TN0cD6\",\"howto_multivariate-stats.md\":\"B-hWcbwR\",\"howto_neutral-landscapes.md\":\"DA12OPVA\",\"howto_polygon-operations.md\":\"CypFAePd\",\"howto_pseudoabsences.md\":\"Beedb4ur\",\"howto_read-part-layer.md\":\"Dn4NGm4J\",\"howto_sdm-counterfactuals.md\":\"CDhcL2rU\",\"howto_sdm-crossvalidation.md\":\"D801FW-p\",\"howto_sdm-hyperparameters.md\":\"DF-XJRz9\",\"howto_sdm-interpretability.md\":\"BoZ45kd0\",\"howto_sdm-pr-roc.md\":\"BZkJOb1m\",\"howto_sdm-variableselection.md\":\"jMMBRT6H\",\"howto_split-layer.md\":\"8ksk3xfU\",\"howto_stac.md\":\"_uB3To7Q\",\"howto_zonal-statistics.md\":\"BPLzcRYi\",\"index.md\":\"D2IDwmv3\",\"manual.md\":\"-Pskgw94\",\"polygons_epa.md\":\"CiJR_ydg\",\"polygons_gadm.md\":\"BHDIHFb0\",\"polygons_naturalearth.md\":\"BJxvmCMQ\",\"polygons_oneearth.md\":\"DlcyobwY\",\"polygons_openstreetmap.md\":\"BG_3Z6_1\",\"polygons_resolve.md\":\"BfT20t3v\",\"reference_changelog_fauxcurrences.md\":\"4LevXBbQ\",\"reference_changelog_gbif.md\":\"DqW1cthc\",\"reference_changelog_occurrencesinterface.md\":\"DFH93--F\",\"reference_changelog_phylopic.md\":\"D_JHj-D8\",\"reference_changelog_pseudoabsences.md\":\"Cyllzj8D\",\"reference_changelog_sdemo.md\":\"DsdEActv\",\"reference_changelog_simplesdmdatasets.md\":\"qz-4l-XK\",\"reference_changelog_simplesdmlayers.md\":\"DXsKTZZL\",\"reference_changelog_simplesdmpolygons.md\":\"H4K4kl5G\",\"reference_changelog_speciesdistributiontoolkit.md\":\"ChTiyvRY\",\"reference_code-of-conduct.md\":\"DrzVDkJR\",\"reference_contributing.md\":\"Cb_5jB56\",\"reference_datasets_index.md\":\"CKFQZ7KY\",\"reference_datasets_interface.md\":\"DW2SqDbA\",\"reference_datasets_internals.md\":\"BS6JirlJ\",\"reference_datasets_types.md\":\"sA5voonv\",\"reference_fauxcurrences_index.md\":\"DZ3DFZDv\",\"reference_gbif_data.md\":\"BzQhKK0y\",\"reference_gbif_enumerated.md\":\"DA54mIKO\",\"reference_gbif_index.md\":\"DdasFIa-\",\"reference_gbif_internals.md\":\"ZRgqH0HX\",\"reference_gbif_types.md\":\"Dlt4cV9e\",\"reference_index.md\":\"CmxQ1qXk\",\"reference_integration_gadm.md\":\"CJblcPid\",\"reference_integration_gbif.jl.md\":\"D0ZQohIf\",\"reference_integration_polygons.md\":\"CSUTo9O1\",\"reference_integration_utilities.md\":\"ClsFYkP4\",\"reference_layers_index.md\":\"DXyFjW6U\",\"reference_layers_operations.md\":\"DUkQBXzQ\",\"reference_layers_types.md\":\"BnPXFbEz\",\"reference_occint_index.md\":\"BXr0dLVh\",\"reference_phylopic_index.md\":\"CdftLPje\",\"reference_polygons_index.md\":\"D_QXWY-G\",\"reference_polygons_interface.md\":\"BEiL6L_f\",\"reference_polygons_internals.md\":\"Djv0trHz\",\"reference_polygons_types.md\":\"C9x8e8M6\",\"reference_pseudo_index.md\":\"DL9NuDZX\",\"reference_sdemo_crossvalidation.md\":\"G7lqpR0e\",\"reference_sdemo_ensembles.md\":\"CuC9QvfC\",\"reference_sdemo_explanations.md\":\"D6LN7EOF\",\"reference_sdemo_features.md\":\"Y47vcMH2\",\"reference_sdemo_index.md\":\"CoP6NGWo\",\"reference_sdemo_models.md\":\"BmvhxDNC\",\"reference_sdemo_saving.md\":\"B5o3EJ0y\",\"reference_sdt_gadm.md\":\"Cm53lV5R\",\"reference_sdt_gbif.md\":\"CrDBUNqy\",\"reference_sdt_polygons.md\":\"DTYSE9LR\",\"reference_sdt_utilities.md\":\"DK0KgZKT\",\"tutorials_climatenovelty.md\":\"BAdQtWLK\",\"tutorials_consensus.md\":\"DYUOKKTs\",\"tutorials_fauxcurrences.md\":\"Z6qFnsGX\",\"tutorials_index.md\":\"DrK0kwl4\",\"tutorials_sdm-boosting.md\":\"BJR64zD_\",\"tutorials_sdm-ensembles.md\":\"BrbcATkd\",\"tutorials_sdm-training.md\":\"D3l9-L4h\",\"tutorials_spatial-boundaries.md\":\"MUNhpcI5\",\"tutorials_virtual-species.md\":\"sY-PvlA8\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Species Distribution Toolkit\",\"description\":\"Documentation for SpeciesDistributionToolkit.jl\",\"base\":\"/SpeciesDistributionToolkit.jl/previews/PR500/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"siteTitle\":\"SDT.jl\",\"docFooter\":{\"next\":false,\"prev\":false},\"logo\":{\"src\":\"/logo.svg\",\"width\":24,\"height\":24},\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Index\",\"link\":\"/index\"},{\"text\":\"Manual\",\"items\":[{\"text\":\"Tutorials\",\"link\":\"/tutorials\"},{\"text\":\"How-to\",\"link\":\"/howto\"},{\"text\":\"Reference\",\"link\":\"/reference\"}]},{\"text\":\"Datasets\",\"items\":[{\"text\":\"Raster data\",\"items\":[{\"text\":\"BiodiversityMapping\",\"link\":\"/datasets/BiodiversityMapping\"},{\"text\":\"CHELSA 1\",\"link\":\"/datasets/CHELSA1\"},{\"text\":\"CHELSA 2\",\"link\":\"/datasets/CHELSA2\"},{\"text\":\"Copernicus\",\"link\":\"/datasets/Copernicus\"},{\"text\":\"EarthEnv\",\"link\":\"/datasets/EarthEnv\"},{\"text\":\"PaleoClim\",\"link\":\"/datasets/PaleoClim\"},{\"text\":\"WorldClim 2\",\"link\":\"/datasets/WorldClim2\"}]},{\"text\":\"Polygon data\",\"items\":[{\"text\":\"EPA\",\"link\":\"/polygons/EPA\"},{\"text\":\"GADM\",\"link\":\"/polygons/GADM\"},{\"text\":\"Natural Earth\",\"link\":\"/polygons/NaturalEarth\"},{\"text\":\"One Earth\",\"link\":\"/polygons/OneEarth\"},{\"text\":\"OpenStreetMap\",\"link\":\"/polygons/OpenStreetMap\"},{\"text\":\"Resolv\",\"link\":\"/polygons/Resolv\"}]}]},{\"text\":\"Ecosystem\",\"items\":[{\"text\":\"Core packages\",\"items\":[{\"text\":\"Fauxcurrences.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/Fauxcurrences/\"},{\"text\":\"GBIF.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/GBIF/\"},{\"text\":\"OccurrencesInterface.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/OccurrencesInterface/\"},{\"text\":\"Phylopic.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/Phylopic/\"},{\"text\":\"PseudoAbsences.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/PseudoAbsences/\"},{\"text\":\"SDeMo.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SDeMo/\"},{\"text\":\"SimpleSDMDatasets.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SimpleSDMDatasets/\"},{\"text\":\"SimpleSDMPolygons.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SimpleSDMPolygons/\"},{\"text\":\"SimpleSDMLayers.jl\",\"link\":\"https://poisotlab.github.io/SpeciesDistributionToolkit.jl/SimpleSDMLayers/\"}]},{\"text\":\"Packages we support\",\"items\":[{\"text\":\"BON.jl\",\"link\":\"https://poisotlab.github.io/BiodiversityObservationNetworks.jl/dev/\"},{\"text\":\"Clustering.jl\",\"link\":\"https://juliastats.org/Clustering.jl/stable/\"},{\"text\":\"MultivariateStats.jl\",\"link\":\"https://juliastats.org/MultivariateStats.jl/stable/\"},{\"text\":\"NeutralLandscapes.jl\",\"link\":\"https://docs.ecojulia.org/NeutralLandscapes.jl/dev/\"},{\"text\":\"SpatialBoundaries.jl\",\"link\":\"https://poisotlab.github.io/SpatialBoundaries.jl/dev/\"},{\"text\":\"STAC.jl\",\"link\":\"https://juliaclimate.github.io/STAC.jl/dev/\"}]}]}],\"sidebar\":{\"/howto/\":[{\"text\":\"How-to\",\"items\":[{\"text\":\"Basic layer operations\",\"collapsed\":true,\"items\":[{\"text\":\"Masking layers\",\"link\":\"/howto/mask-layer/\"},{\"text\":\"Masking layers with polygons\",\"link\":\"/howto/mask-polygons/\"},{\"text\":\"Arithmetic on layers\",\"link\":\"/howto/layer-arithmetic/\"},{\"text\":\"Statistics on layers\",\"link\":\"/howto/layer-statistics/\"},{\"text\":\"Zonal statistics on layers\",\"link\":\"/howto/zonal-statistics/\"},{\"text\":\"Neutral landscapes\",\"link\":\"/howto/neutral-landscapes/\"},{\"text\":\"Splitting layers in tiles\",\"link\":\"/howto/split-layer/\"},{\"text\":\"Clustering layers\",\"link\":\"/howto/cluster-layers/\"},{\"text\":\"Multivariate transformations\",\"link\":\"/howto/multivariate-stats/\"}]},{\"text\":\"Data preparation\",\"collapsed\":true,\"items\":[{\"text\":\"Getting GBIF data\",\"link\":\"/howto/get-gbif-data/\"},{\"text\":\"Downloading GBIF data\",\"link\":\"/howto/download-gbif-data/\"},{\"text\":\"Getting STAC data\",\"link\":\"/howto/stac/\"},{\"text\":\"Reading part of a layer\",\"link\":\"/howto/read-part-layer/\"},{\"text\":\"Listing provided layers\",\"link\":\"/howto/list-provided-layers/\"},{\"text\":\"Data interpolation\",\"link\":\"/howto/interpolate/\"},{\"text\":\"Operations on polygons\",\"link\":\"/howto/polygon-operations/\"}]},{\"text\":\"Working with occurrence data\",\"collapsed\":true,\"items\":[{\"text\":\"Bounding boxes\",\"link\":\"/howto/get-boundingbox/\"},{\"text\":\"Access layers at occurrences positions\",\"link\":\"/howto/layer-occurrences/\"},{\"text\":\"Pseudo-absences\",\"link\":\"/howto/pseudoabsences/\"},{\"text\":\"Makie integration\",\"link\":\"/howto/makie/\"}]},{\"text\":\"Species Distribution Models\",\"collapsed\":true,\"items\":[{\"text\":\"Cross-validation\",\"link\":\"/howto/sdm-crossvalidation/\"},{\"text\":\"Variable selection\",\"link\":\"/howto/sdm-variableselection/\"},{\"text\":\"Hyper-parameters\",\"link\":\"/howto/sdm-hyperparameters/\"},{\"text\":\"PR and ROC curves\",\"link\":\"/howto/sdm-pr-roc/\"},{\"text\":\"Interpretability\",\"link\":\"/howto/sdm-interpretability/\"},{\"text\":\"Counterfactuals\",\"link\":\"/howto/sdm-counterfactuals/\"}]}]}],\"/tutorials/\":[{\"text\":\"Tutorials\",\"items\":[{\"text\":\"Calculating climate novelty\",\"link\":\"/tutorials/climatenovelty/\"},{\"text\":\"Generating a landcover consensus\",\"link\":\"/tutorials/consensus/\"},{\"text\":\"Generating fauxcurrences\",\"link\":\"/tutorials/fauxcurrences/\"},{\"text\":\"Generating virtual species\",\"link\":\"/tutorials/virtual-species/\"},{\"text\":\"Identifying spatial boundaries\",\"link\":\"/tutorials/spatial-boundaries/\"},{\"text\":\"Building a species distribution model\",\"link\":\"/tutorials/sdm-training/\"},{\"text\":\"Ensemble models\",\"link\":\"/tutorials/sdm-ensembles/\"},{\"text\":\"SDM with AdaBoost\",\"link\":\"/tutorials/sdm-boosting/\"}]}],\"/reference/\":[{\"text\":\"SpeciesDistributionToolkit\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/\"},{\"text\":\"GADM\",\"link\":\"/reference/sdt/gadm/\"},{\"text\":\"Polygons\",\"link\":\"/reference/sdt/gadm/\"},{\"text\":\"GBIF\",\"link\":\"/reference/sdt/gbif/\"}]},{\"text\":\"GBIF\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/gbif/\"},{\"text\":\"Types\",\"link\":\"/reference/gbif/types/\"},{\"text\":\"Data\",\"link\":\"/reference/gbif/data/\"},{\"text\":\"Enumerated values\",\"link\":\"/reference/gbif/enumerated/\"},{\"text\":\"Internals\",\"link\":\"/reference/gbif/internals/\"}]},{\"text\":\"OccurrencesInterface\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/occint/\"}]},{\"text\":\"PseudoAbsences\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/pseudo/\"}]},{\"text\":\"Phylopic\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/phylopic/\"}]},{\"text\":\"Fauxcurrences\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/fauxcurrences/\"}]},{\"text\":\"SDeMo\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/sdemo/\"},{\"text\":\"Models\",\"link\":\"/reference/sdemo/models/\"},{\"text\":\"Ensembles\",\"link\":\"/reference/sdemo/ensembles/\"},{\"text\":\"Saving\",\"link\":\"/reference/sdemo/saving/\"},{\"text\":\"Cross-validation\",\"link\":\"/reference/sdemo/crossvalidation/\"},{\"text\":\"Feature selection\",\"link\":\"/reference/sdemo/features/\"},{\"text\":\"Explanations\",\"link\":\"/reference/sdemo/explanations/\"}]},{\"text\":\"SimpleSDMDatasets\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/datasets/\"},{\"text\":\"Interface\",\"link\":\"/reference/datasets/interface/\"},{\"text\":\"Types\",\"link\":\"/reference/datasets/types/\"},{\"text\":\"Internal\",\"link\":\"/reference/datasets/internals/\"}]},{\"text\":\"SimpleSDMPolygons\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/polygons/\"},{\"text\":\"Interface\",\"link\":\"/reference/polygons/interface/\"},{\"text\":\"Types\",\"link\":\"/reference/polygons/types/\"},{\"text\":\"Internal\",\"link\":\"/reference/polygons/internals/\"}]},{\"text\":\"SimpleSDMLayers\",\"collapsed\":true,\"items\":[{\"text\":\"Documentation\",\"link\":\"/reference/layers/\"},{\"text\":\"Types\",\"link\":\"/reference/layers/types/\"},{\"text\":\"Operations\",\"link\":\"/reference/layers/operations/\"}]},{\"text\":\"Changelogs\",\"collapsed\":true,\"items\":[{\"text\":\"SpeciesDistributionToolkit\",\"link\":\"/reference/changelog/SpeciesDistributionToolkit/\"},{\"text\":\"Fauxcurrences\",\"link\":\"/reference/changelog/Fauxcurrences/\"},{\"text\":\"GBIF\",\"link\":\"/reference/changelog/GBIF/\"},{\"text\":\"OccurrencesInterfaces\",\"link\":\"/reference/changelog/OccurrencesInterface/\"},{\"text\":\"Phylopic\",\"link\":\"/reference/changelog/Phylopic/\"},{\"text\":\"PseudoAbsences\",\"link\":\"/reference/changelog/PseudoAbsences/\"},{\"text\":\"SDeMo\",\"link\":\"/reference/changelog/SDeMo/\"},{\"text\":\"SimpleSDMDatasets\",\"link\":\"/reference/changelog/SimpleSDMDatasets/\"},{\"text\":\"SimpleSDMLayers\",\"link\":\"/reference/changelog/SimpleSDMLayers/\"}]},{\"text\":\"Contribute\",\"items\":[{\"text\":\"Code of Conduct\",\"link\":\"/reference/code-of-conduct/\"},{\"text\":\"Contribution guidelines\",\"link\":\"/reference/contributing/\"},{\"text\":\"Roadmap\",\"link\":\"https://github.com/orgs/PoisotLab/projects/3\"},{\"text\":\"Discussions\",\"link\":\"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/discussions\"},{\"text\":\"Good first issues\",\"link\":\"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/issues?q=is%3Aopen%20is%3Aissue%20label%3A%22%F0%9F%A4%97%20good%20first%20PR%22\"}]}]},\"editLink\":{\"pattern\":\"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/edit/main/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a> by the <a href=\\\"https://poisotlab.io/\\\" target=\\\"_blank\\\">Computational Ecology Research Group</a><br>\",\"copyright\":\"This documentation is released under the <a href=\\\"https://creativecommons.org/licenses/by/4.0/deed.en\\\" target=\\\"_blank\\\">CC-BY 4.0 licence</a> - 2025\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>