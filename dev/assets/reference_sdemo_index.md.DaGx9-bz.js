import{_ as o,C as r,o as p,c as d,j as i,a as n,E as a,ag as t,w as l}from"./chunks/framework.DsV3aknV.js";const I=JSON.parse('{"title":"Tools for SDM demos and education","description":"","frontmatter":{},"headers":[],"relativePath":"reference/sdemo/index.md","filePath":"reference/sdemo/index.md","lastUpdated":null}'),h={name:"reference/sdemo/index.md"},k={class:"jldocstring custom-block",open:""},c={class:"jldocstring custom-block",open:""},F={class:"jldocstring custom-block",open:""},g={class:"jldocstring custom-block",open:""},u={class:"jldocstring custom-block",open:""},b={class:"jldocstring custom-block",open:""},f={class:"jldocstring custom-block",open:""},y={class:"jldocstring custom-block",open:""},m={class:"jldocstring custom-block",open:""},B={class:"jldocstring custom-block",open:""},D={class:"jldocstring custom-block",open:""},T={class:"jldocstring custom-block",open:""},S={class:"jldocstring custom-block",open:""},_={class:"jldocstring custom-block",open:""},v={class:"jldocstring custom-block",open:""};function j(C,s,M,E,A,P){const e=r("Badge");return p(),d("div",null,[s[78]||(s[78]=i("h1",{id:"Tools-for-SDM-demos-and-education",tabindex:"-1"},[n("Tools for SDM demos and education "),i("a",{class:"header-anchor",href:"#Tools-for-SDM-demos-and-education","aria-label":'Permalink to "Tools for SDM demos and education {#Tools-for-SDM-demos-and-education}"'},"​")],-1)),s[79]||(s[79]=i("h2",{id:"The-prediction-pipeline",tabindex:"-1"},[n("The prediction pipeline "),i("a",{class:"header-anchor",href:"#The-prediction-pipeline","aria-label":'Permalink to "The prediction pipeline {#The-prediction-pipeline}"'},"​")],-1)),i("details",k,[i("summary",null,[s[0]||(s[0]=i("a",{id:"SDeMo.AbstractSDM",href:"#SDeMo.AbstractSDM"},[i("span",{class:"jlbinding"},"SDeMo.AbstractSDM")],-1)),s[1]||(s[1]=n()),a(e,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[3]||(s[3]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">AbstractSDM</span></span></code></pre></div><p>This abstract type covers the regular, ensemble, and boosted models.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[2]||(s[2]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L1-L5",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",c,[i("summary",null,[s[4]||(s[4]=i("a",{id:"SDeMo.AbstractEnsembleSDM",href:"#SDeMo.AbstractEnsembleSDM"},[i("span",{class:"jlbinding"},"SDeMo.AbstractEnsembleSDM")],-1)),s[5]||(s[5]=n()),a(e,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[7]||(s[7]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">AbstractEnsembleSDM</span></span></code></pre></div><p>This abstract types covers model that combine different SDMs to make a prediction, which currently covers <code>Bagging</code> and <code>Ensemble</code>.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[6]||(s[6]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L8-L13",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",F,[i("summary",null,[s[8]||(s[8]=i("a",{id:"SDeMo.SDM",href:"#SDeMo.SDM"},[i("span",{class:"jlbinding"},"SDeMo.SDM")],-1)),s[9]||(s[9]=n()),a(e,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[11]||(s[11]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">SDM</span></span></code></pre></div><p>This type specifies a <em>full</em> model, which is composed of a transformer (which applies a transformation on the data), a classifier (which returns a quantitative score), a threshold (above which the score corresponds to the prediction of a presence).</p><p>In addition, the SDM carries with it the training features and labels, as well as a vector of indices indicating which variables are actually used by the model.</p>',3)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[10]||(s[10]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L40-L51",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",g,[i("summary",null,[s[12]||(s[12]=i("a",{id:"SDeMo.Transformer",href:"#SDeMo.Transformer"},[i("span",{class:"jlbinding"},"SDeMo.Transformer")],-1)),s[13]||(s[13]=n()),a(e,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[15]||(s[15]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">Transformer</span></span></code></pre></div><p>This abstract type covers all transformations that are applied to the data before fitting the classifier.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[14]||(s[14]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L24-L29",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",u,[i("summary",null,[s[16]||(s[16]=i("a",{id:"SDeMo.Classifier",href:"#SDeMo.Classifier"},[i("span",{class:"jlbinding"},"SDeMo.Classifier")],-1)),s[17]||(s[17]=n()),a(e,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[19]||(s[19]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">Classifier</span></span></code></pre></div><p>This abstract type covers all algorithms to convert transformed data into prediction.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[18]||(s[18]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L32-L37",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s[80]||(s[80]=i("h3",{id:"Utility-functions",tabindex:"-1"},[n("Utility functions "),i("a",{class:"header-anchor",href:"#Utility-functions","aria-label":'Permalink to "Utility functions {#Utility-functions}"'},"​")],-1)),i("details",b,[i("summary",null,[s[20]||(s[20]=i("a",{id:"SDeMo.features",href:"#SDeMo.features"},[i("span",{class:"jlbinding"},"SDeMo.features")],-1)),s[21]||(s[21]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[24]||(s[24]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">features</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Returns the features stored in the field <code>X</code> of the SDM. Note that the features are an array, and this does not return a copy of it – any change made to the output of this function <em>will</em> change the content of the SDM features.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[22]||(s[22]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L92-L98",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[25]||(s[25]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">features</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> n)</span></span></code></pre></div><p>Returns the <em>n</em>-th feature stored in the field <code>X</code> of the SDM.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[23]||(s[23]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L101-L105",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",f,[i("summary",null,[s[26]||(s[26]=i("a",{id:"SDeMo.labels",href:"#SDeMo.labels"},[i("span",{class:"jlbinding"},"SDeMo.labels")],-1)),s[27]||(s[27]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[29]||(s[29]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">labels</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Returns the labels stored in the field <code>y</code> of the SDM – note that this is not a copy of the labels, but the object itself.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[28]||(s[28]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L123-L128",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",y,[i("summary",null,[s[30]||(s[30]=i("a",{id:"SDeMo.threshold",href:"#SDeMo.threshold"},[i("span",{class:"jlbinding"},"SDeMo.threshold")],-1)),s[31]||(s[31]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[33]||(s[33]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">threshold</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>This returns the value above which the score returned by the SDM is considered to be a presence.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[32]||(s[32]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L77-L82",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",m,[i("summary",null,[s[34]||(s[34]=i("a",{id:"SDeMo.threshold!",href:"#SDeMo.threshold!"},[i("span",{class:"jlbinding"},"SDeMo.threshold!")],-1)),s[35]||(s[35]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[39]||(s[39]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">threshold!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> τ)</span></span></code></pre></div><p>Sets the value of the threshold.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[36]||(s[36]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L85-L89",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[40]||(s[40]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">threshold!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> folds</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Vector{Tuple{Vector{Int}, Vector{Int}}}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> optimality</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">mcc)</span></span></code></pre></div><p>Optimizes the threshold for a SDM using cross-validation, as given by the <code>folds</code>. This is meant to be used <em>after</em> cross-validation, as it will cross-validate the threshold across all the training data in a way that is a little more robust than the version in <code>train!</code>.</p><p>The specific technique used is to train one model per fold, then aggregate all of their predictions on the validation data, and find the value of the threshold that maximizes the average performance across folds.</p>',3)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[37]||(s[37]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/crossvalidation/crossvalidation.jl#L246-L257",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[41]||(s[41]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">threshold!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Version of <code>threshold!</code> without folds, for which the default of 10-fold validation will be used.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[38]||(s[38]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/crossvalidation/crossvalidation.jl#L300-L305",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",B,[i("summary",null,[s[42]||(s[42]=i("a",{id:"SDeMo.variables",href:"#SDeMo.variables"},[i("span",{class:"jlbinding"},"SDeMo.variables")],-1)),s[43]||(s[43]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[45]||(s[45]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">variables</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Returns the list of variables used by the SDM – these <em>may</em> be ordered by importance. This does not return a copy of the variables array, but the array itself.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[44]||(s[44]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L131-L137",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",D,[i("summary",null,[s[46]||(s[46]=i("a",{id:"SDeMo.variables!",href:"#SDeMo.variables!"},[i("span",{class:"jlbinding"},"SDeMo.variables!")],-1)),s[47]||(s[47]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[52]||(s[52]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">variables!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> v)</span></span></code></pre></div><p>Sets the list of variables.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[48]||(s[48]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L140-L144",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[53]||(s[53]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">variables!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ensemble</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Bagging</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> v</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Vector{Int}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Sets the variable of the top-level model, and then sets the variables of each model in the ensemble.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[49]||(s[49]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/ensembles/bagging.jl#L98-L103",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[54]||(s[54]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">variables!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(model</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">AbstractSDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Type{T}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> folds</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Vector{Tuple{Vector{Int}, Vector{Int}}}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> included</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">Int[]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> optimality</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">mcc</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> verbose</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bagfeatures</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {T </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> VariableSelectionStrategy</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre></div><p>Performs variable selection based on a selection strategy, with a possible <code>folds</code> for cross-validation. If omitted, this defaults to k-folds.</p><p>The model is retrained on the optimal set of variables after training.</p><p><strong>Keywords</strong>:</p><ul><li><p><code>included</code> (<code>Int[]</code>), a list of variables that must be included in the model</p></li><li><p><code>optimality</code> (<code>mcc</code>), the measure to optimise at each round of variable selection</p></li><li><p><code>verbose</code> (<code>false</code>), whether the performance should be returned after each round of variable selection</p></li><li><p><code>bagfeatures</code> (<code>false</code>), whether <code>bagfeatures!</code> should be called on each model in an homogeneous ensemble</p></li><li><p>all other keywords are passed to <code>train!</code> and <code>crossvalidate</code></p></li></ul><p><strong>Important notes</strong>:</p><ol><li><p>When using <code>bagfeatures</code> with a pool of included variables, they will always be present in the overall model, but not necessarilly in each model of the ensemble</p></li><li><p>When using <code>VarianceInflationFactor</code>, the variable selection will stop even if the VIF is above the threshold, if it means producing a model with a lower performance – using <code>variables!</code> will <em>always</em> lead to a better model</p></li></ol>',7)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[50]||(s[50]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/variables/varsel.jl#L94-L121",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[55]||(s[55]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">variables!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(model</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">M</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Type{StrictVarianceInflationFactor{N}}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> args</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> included</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Vector{Int}</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">Int[]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> optimality</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">mcc</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> verbose</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bagfeatures</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {M </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> Union{SDM, Bagging}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> N}</span></span></code></pre></div><p>Version of the variable selection for the strict VIF case. This may result in a worse model, and for this reason there is no cross-validation.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[51]||(s[51]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/variables/varsel.jl#L413-L418",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",T,[i("summary",null,[s[56]||(s[56]=i("a",{id:"SDeMo.instance",href:"#SDeMo.instance"},[i("span",{class:"jlbinding"},"SDeMo.instance")],-1)),s[57]||(s[57]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[59]||(s[59]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">instance</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> n</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> strict</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Returns the <em>n</em>-th instance stored in the field <code>X</code> of the SDM. If the keyword argument <code>strict</code> is <code>true</code>, only the variables used for prediction are returned.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[58]||(s[58]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/models.jl#L108-L114",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s[81]||(s[81]=i("h3",{id:"Training-and-predicting",tabindex:"-1"},[n("Training and predicting "),i("a",{class:"header-anchor",href:"#Training-and-predicting","aria-label":'Permalink to "Training and predicting {#Training-and-predicting}"'},"​")],-1)),i("details",S,[i("summary",null,[s[60]||(s[60]=i("a",{id:"SDeMo.train!",href:"#SDeMo.train!"},[i("span",{class:"jlbinding"},"SDeMo.train!")],-1)),s[61]||(s[61]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[66]||(s[66]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">train!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ensemble</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Bagging</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Trains all the models in an ensemble model - the keyword arguments are passed to <code>train!</code> for each model. Note that this retrains the <em>entire</em> model, which includes the transformers.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[62]||(s[62]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/ensembles/pipeline.jl#L14-L20",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[67]||(s[67]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">train!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(ensemble</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Ensemble</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Trains all the model in an heterogeneous ensemble model - the keyword arguments are passed to <code>train!</code> for each model. Note that this retrains the <em>entire</em> model, which includes the transformers.</p><p>The keywod arguments are passed to <code>train!</code> and can include the <code>training</code> indices.</p>',3)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[63]||(s[63]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/ensembles/pipeline.jl#L73-L82",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[68]||(s[68]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">train!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(b</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">AdaBoost</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Trains all the model in an ensemble model - the keyword arguments are passed to <code>train!</code> for each model. Note that this also retrains the <em>original</em> model. If the original model contains transformers, they are re-trained for each learner that is added to the ensemble. This is crucial as learners are re-trained on proportionally weighted samples of the training data, and not re-training the transformers would create data leakage.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[64]||(s[64]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/boosting/adaboost.jl#L100-L109",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[69]||(s[69]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">train!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> threshold</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> training</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">:</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> optimality</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">mcc)</span></span></code></pre></div><p>This is the main training function to train a SDM.</p><p>The three keyword arguments are:</p><ul><li><p><code>training</code>: defaults to <code>:</code>, and is the range (or alternatively the indices) of the data that are used to train the model</p></li><li><p><code>threshold</code>: defaults to <code>true</code>, and performs moving threshold by evaluating 200 possible values between the minimum and maximum output of the model, and returning the one that is optimal</p></li><li><p><code>optimality</code>: defaults to <code>mcc</code>, and is the function applied to the confusion matrix to evaluate which value of the threshold is the best</p></li><li><p><code>absences</code>: defaults to <code>false</code>, and indicates whether the (pseudo) absences are used to train the transformer; when using actual absences, this should be set to <code>true</code></p></li></ul><p>Internally, this function trains the transformer, then projects the data, then trains the classifier. If <code>threshold</code> is <code>true</code>, the threshold is then optimized.</p>',5)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[65]||(s[65]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/pipeline.jl#L1-L20",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",_,[i("summary",null,[s[70]||(s[70]=i("a",{id:"StatsAPI.predict",href:"#StatsAPI.predict"},[i("span",{class:"jlbinding"},"StatsAPI.predict")],-1)),s[71]||(s[71]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[73]||(s[73]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">predict</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(model</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RegressionModel</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [newX])</span></span></code></pre></div><p>Form the predicted response of <code>model</code>. An object with new covariate values <code>newX</code> can be supplied, which should have the same type and structure as that used to fit <code>model</code>; e.g. for a GLM it would generally be a <code>DataFrame</code> with the same variable names as the original predictors.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[72]||(s[72]=[i("a",{href:"https://github.com/JuliaStats/StatsAPI.jl/blob/v1.8.0/src/regressionmodel.jl#L74-L80",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",v,[i("summary",null,[s[74]||(s[74]=i("a",{id:"SDeMo.reset!",href:"#SDeMo.reset!"},[i("span",{class:"jlbinding"},"SDeMo.reset!")],-1)),s[75]||(s[75]=n()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[77]||(s[77]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reset!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sdm</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDM</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> thr</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">0.5</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Resets a model, with a potentially specified value of the threshold. This amounts to re-using all the variables, and removing the tuned threshold version.</p>',2)),a(e,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[76]||(s[76]=[i("a",{href:"https://github.com/PoisotLab/SpeciesDistributionToolkit.jl/blob/aa3f4da480343bd9c01f7f1c1bfa3b0ed0d4f035/SDeMo/src/pipeline.jl#L126-L131",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})])])}const L=o(h,[["render",j]]);export{I as __pageData,L as default};
